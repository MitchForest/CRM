{
  "openapi": "3.0.0",
  "info": {
    "title": "Sassy CRM API",
    "description": "Modern headless CRM API for software sales teams with AI-powered features",
    "version": "1.0.0",
    "contact": {
      "name": "API Support",
      "email": "support@sassycrm.com"
    }
  },
  "servers": [
    {
      "url": "http://localhost:8080/api",
      "description": "Development server"
    },
    {
      "url": "https://api.sassycrm.com/api",
      "description": "Production server"
    }
  ],
  "security": [
    {
      "bearerAuth": []
    }
  ],
  "tags": [
    {
      "name": "Authentication",
      "description": "User authentication endpoints"
    },
    {
      "name": "Dashboard",
      "description": "Dashboard metrics and analytics"
    },
    {
      "name": "Leads",
      "description": "Lead management"
    },
    {
      "name": "Contacts",
      "description": "Contact management"
    },
    {
      "name": "Opportunities",
      "description": "Opportunity management"
    },
    {
      "name": "Cases",
      "description": "Support case management"
    },
    {
      "name": "Activities",
      "description": "Task, call, and meeting management"
    },
    {
      "name": "Analytics",
      "description": "Business analytics"
    },
    {
      "name": "AI",
      "description": "AI-powered features"
    },
    {
      "name": "Forms",
      "description": "Form builder and submissions"
    },
    {
      "name": "Knowledge Base",
      "description": "Knowledge base articles"
    },
    {
      "name": "Activity Tracking",
      "description": "Website activity tracking"
    },
    {
      "name": "Customer Health",
      "description": "Customer health scoring"
    },
    {
      "name": "Email",
      "description": "Email templates and sending"
    },
    {
      "name": "Documents",
      "description": "Document management"
    },
    {
      "name": "Public",
      "description": "Public-facing endpoints"
    },
    {
      "name": "Schema",
      "description": "Schema and type generation"
    }
  ],
  "paths": {
    "/auth/login": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Login",
        "description": "Authenticate with email/username and password",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email",
                  "password"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "password": {
                    "type": "string",
                    "format": "password"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful authentication",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "access_token": {
                      "type": "string"
                    },
                    "refresh_token": {
                      "type": "string"
                    },
                    "expires_in": {
                      "type": "integer"
                    },
                    "user": {
                      "$ref": "#/components/schemas/User"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/auth/refresh": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Refresh access token",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "refresh_token"
                ],
                "properties": {
                  "refresh_token": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Token refreshed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "access_token": {
                      "type": "string"
                    },
                    "expires_in": {
                      "type": "integer"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/auth/logout": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Logout",
        "responses": {
          "200": {
            "description": "Successfully logged out"
          }
        }
      }
    },
    "/auth/me": {
      "get": {
        "tags": [
          "Authentication"
        ],
        "summary": "Get current user",
        "responses": {
          "200": {
            "description": "Current user details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/User"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/auth/forgot-password": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Request password reset",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password reset email sent"
          }
        }
      }
    },
    "/auth/reset-password": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Reset password",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "token",
                  "password"
                ],
                "properties": {
                  "token": {
                    "type": "string"
                  },
                  "password": {
                    "type": "string",
                    "format": "password"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password reset successful"
          }
        }
      }
    },
    "/crm/dashboard/metrics": {
      "get": {
        "tags": [
          "Dashboard"
        ],
        "summary": "Get dashboard metrics",
        "parameters": [
          {
            "name": "period",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "today",
                "week",
                "month",
                "quarter",
                "year"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Dashboard metrics",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/DashboardMetrics"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/crm/dashboard/pipeline": {
      "get": {
        "tags": [
          "Dashboard"
        ],
        "summary": "Get pipeline data",
        "parameters": [
          {
            "name": "user_id",
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Pipeline data",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/PipelineData"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/crm/dashboard/activities": {
      "get": {
        "tags": [
          "Dashboard"
        ],
        "summary": "Get activity metrics",
        "responses": {
          "200": {
            "description": "Activity metrics",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/ActivityMetrics"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/crm/dashboard/cases": {
      "get": {
        "tags": [
          "Dashboard"
        ],
        "summary": "Get case metrics",
        "responses": {
          "200": {
            "description": "Case metrics",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/CaseMetrics"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/crm/leads": {
      "get": {
        "tags": [
          "Leads"
        ],
        "summary": "List leads",
        "parameters": [
          {
            "$ref": "#/components/parameters/page"
          },
          {
            "$ref": "#/components/parameters/limit"
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "new",
                "contacted",
                "qualified",
                "unqualified",
                "converted"
              ]
            }
          },
          {
            "name": "assigned_user_id",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "search",
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of leads",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Lead"
                      }
                    },
                    "pagination": {
                      "$ref": "#/components/schemas/Pagination"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Leads"
        ],
        "summary": "Create lead",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LeadInput"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Lead created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        }
                      }
                    },
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/crm/leads/{id}": {
      "get": {
        "tags": [
          "Leads"
        ],
        "summary": "Get lead details",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "responses": {
          "200": {
            "description": "Lead details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/Lead"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Leads"
        ],
        "summary": "Update lead",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LeadInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Lead updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Leads"
        ],
        "summary": "Partially update lead",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LeadInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Lead updated"
          }
        }
      },
      "delete": {
        "tags": [
          "Leads"
        ],
        "summary": "Delete lead",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "responses": {
          "200": {
            "description": "Lead deleted"
          }
        }
      }
    },
    "/crm/leads/{id}/ai-score": {
      "post": {
        "tags": [
          "Leads",
          "AI"
        ],
        "summary": "Calculate AI score for lead",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "responses": {
          "200": {
            "description": "AI score calculated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "score": {
                      "type": "number",
                      "format": "float"
                    },
                    "confidence": {
                      "type": "number",
                      "format": "float"
                    },
                    "factors": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/crm/leads/{id}/score-history": {
      "get": {
        "tags": [
          "Leads",
          "AI"
        ],
        "summary": "Get lead score history",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "responses": {
          "200": {
            "description": "Score history",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/LeadScore"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/crm/leads/{id}/timeline": {
      "get": {
        "tags": [
          "Leads"
        ],
        "summary": "Get lead timeline",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "responses": {
          "200": {
            "description": "Lead timeline",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/TimelineEvent"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/crm/leads/{id}/convert": {
      "post": {
        "tags": [
          "Leads"
        ],
        "summary": "Convert lead to contact/opportunity",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "create_contact": {
                    "type": "boolean"
                  },
                  "create_opportunity": {
                    "type": "boolean"
                  },
                  "opportunity_name": {
                    "type": "string"
                  },
                  "opportunity_amount": {
                    "type": "number"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Lead converted",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "contact_id": {
                      "type": "string"
                    },
                    "opportunity_id": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/crm/contacts": {
      "get": {
        "tags": [
          "Contacts"
        ],
        "summary": "List contacts",
        "parameters": [
          {
            "$ref": "#/components/parameters/page"
          },
          {
            "$ref": "#/components/parameters/limit"
          },
          {
            "name": "search",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "account_id",
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of contacts",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Contact"
                      }
                    },
                    "pagination": {
                      "$ref": "#/components/schemas/Pagination"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Contacts"
        ],
        "summary": "Create contact",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ContactInput"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Contact created"
          }
        }
      }
    },
    "/crm/contacts/{id}": {
      "get": {
        "tags": [
          "Contacts"
        ],
        "summary": "Get contact details",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "responses": {
          "200": {
            "description": "Contact details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/Contact"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Contacts"
        ],
        "summary": "Update contact",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ContactInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Contact updated"
          }
        }
      },
      "delete": {
        "tags": [
          "Contacts"
        ],
        "summary": "Delete contact",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "responses": {
          "200": {
            "description": "Contact deleted"
          }
        }
      }
    },
    "/crm/contacts/{id}/unified-view": {
      "get": {
        "tags": [
          "Contacts"
        ],
        "summary": "Get unified contact view",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "responses": {
          "200": {
            "description": "Unified contact view",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "contact": {
                      "$ref": "#/components/schemas/Contact"
                    },
                    "timeline": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/TimelineEvent"
                      }
                    },
                    "stats": {
                      "type": "object"
                    },
                    "health": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/crm/contacts/{id}/health-score": {
      "get": {
        "tags": [
          "Contacts"
        ],
        "summary": "Get contact health score",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "responses": {
          "200": {
            "description": "Health score",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/HealthScore"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/crm/opportunities": {
      "get": {
        "tags": [
          "Opportunities"
        ],
        "summary": "List opportunities",
        "parameters": [
          {
            "$ref": "#/components/parameters/page"
          },
          {
            "$ref": "#/components/parameters/limit"
          },
          {
            "name": "sales_stage",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "assigned_user_id",
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of opportunities",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Opportunity"
                      }
                    },
                    "pagination": {
                      "$ref": "#/components/schemas/Pagination"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Opportunities"
        ],
        "summary": "Create opportunity",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OpportunityInput"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Opportunity created"
          }
        }
      }
    },
    "/crm/opportunities/pipeline": {
      "get": {
        "tags": [
          "Opportunities"
        ],
        "summary": "Get pipeline view",
        "parameters": [
          {
            "name": "user_id",
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Pipeline data",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "additionalProperties": {
                        "type": "array",
                        "items": {
                          "$ref": "#/components/schemas/Opportunity"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/crm/opportunities/{id}": {
      "get": {
        "tags": [
          "Opportunities"
        ],
        "summary": "Get opportunity details",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "responses": {
          "200": {
            "description": "Opportunity details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/Opportunity"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Opportunities"
        ],
        "summary": "Update opportunity",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OpportunityInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Opportunity updated"
          }
        }
      },
      "delete": {
        "tags": [
          "Opportunities"
        ],
        "summary": "Delete opportunity",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "responses": {
          "200": {
            "description": "Opportunity deleted"
          }
        }
      }
    },
    "/crm/opportunities/{id}/stage": {
      "post": {
        "tags": [
          "Opportunities"
        ],
        "summary": "Update opportunity stage",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "sales_stage"
                ],
                "properties": {
                  "sales_stage": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Stage updated"
          }
        }
      }
    },
    "/crm/cases": {
      "get": {
        "tags": [
          "Cases"
        ],
        "summary": "List support cases",
        "parameters": [
          {
            "$ref": "#/components/parameters/page"
          },
          {
            "$ref": "#/components/parameters/limit"
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "new",
                "assigned",
                "closed",
                "pending_input",
                "rejected"
              ]
            }
          },
          {
            "name": "priority",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "high",
                "medium",
                "low"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of cases",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/SupportCase"
                      }
                    },
                    "pagination": {
                      "$ref": "#/components/schemas/Pagination"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Cases"
        ],
        "summary": "Create case",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CaseInput"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Case created"
          }
        }
      }
    },
    "/crm/cases/{id}": {
      "get": {
        "tags": [
          "Cases"
        ],
        "summary": "Get case details",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "responses": {
          "200": {
            "description": "Case details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/SupportCase"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Cases"
        ],
        "summary": "Update case",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CaseInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Case updated"
          }
        }
      },
      "delete": {
        "tags": [
          "Cases"
        ],
        "summary": "Delete case",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "responses": {
          "200": {
            "description": "Case deleted"
          }
        }
      }
    },
    "/crm/cases/{id}/status": {
      "post": {
        "tags": [
          "Cases"
        ],
        "summary": "Update case status",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "status"
                ],
                "properties": {
                  "status": {
                    "type": "string",
                    "enum": [
                      "new",
                      "assigned",
                      "closed",
                      "pending_input",
                      "rejected"
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Status updated"
          }
        }
      }
    },
    "/crm/cases/{id}/assign": {
      "post": {
        "tags": [
          "Cases"
        ],
        "summary": "Assign case to user",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "assigned_user_id"
                ],
                "properties": {
                  "assigned_user_id": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Case assigned"
          }
        }
      }
    },
    "/crm/activities": {
      "get": {
        "tags": [
          "Activities"
        ],
        "summary": "List all activities",
        "parameters": [
          {
            "$ref": "#/components/parameters/page"
          },
          {
            "$ref": "#/components/parameters/limit"
          },
          {
            "name": "type",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "task",
                "call",
                "meeting"
              ]
            }
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of activities",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Activity"
                      }
                    },
                    "pagination": {
                      "$ref": "#/components/schemas/Pagination"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/crm/activities/upcoming": {
      "get": {
        "tags": [
          "Activities"
        ],
        "summary": "Get upcoming activities",
        "parameters": [
          {
            "name": "days",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 7
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Upcoming activities",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Activity"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/crm/activities/overdue": {
      "get": {
        "tags": [
          "Activities"
        ],
        "summary": "Get overdue activities",
        "responses": {
          "200": {
            "description": "Overdue activities",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Activity"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/crm/activities/tasks": {
      "post": {
        "tags": [
          "Activities"
        ],
        "summary": "Create task",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TaskInput"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Task created"
          }
        }
      }
    },
    "/crm/activities/calls": {
      "post": {
        "tags": [
          "Activities"
        ],
        "summary": "Create call",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CallInput"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Call created"
          }
        }
      }
    },
    "/crm/activities/meetings": {
      "post": {
        "tags": [
          "Activities"
        ],
        "summary": "Create meeting",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MeetingInput"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Meeting created"
          }
        }
      }
    },
    "/crm/activities/{type}/{id}": {
      "put": {
        "tags": [
          "Activities"
        ],
        "summary": "Update activity",
        "parameters": [
          {
            "name": "type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "enum": [
                "tasks",
                "calls",
                "meetings"
              ]
            }
          },
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ActivityInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Activity updated"
          }
        }
      },
      "delete": {
        "tags": [
          "Activities"
        ],
        "summary": "Delete activity",
        "parameters": [
          {
            "name": "type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "enum": [
                "tasks",
                "calls",
                "meetings"
              ]
            }
          },
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "responses": {
          "200": {
            "description": "Activity deleted"
          }
        }
      }
    },
    "/crm/analytics/sales": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "Get sales analytics",
        "parameters": [
          {
            "name": "period",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "week",
                "month",
                "quarter",
                "year"
              ]
            }
          },
          {
            "name": "user_id",
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Sales analytics",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/SalesAnalytics"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/crm/analytics/leads": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "Get lead analytics",
        "parameters": [
          {
            "name": "period",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "week",
                "month",
                "quarter",
                "year"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lead analytics",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/LeadAnalytics"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/crm/analytics/activities": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "Get activity analytics",
        "parameters": [
          {
            "name": "period",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "week",
                "month",
                "quarter",
                "year"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Activity analytics",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/ActivityAnalytics"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/crm/analytics/conversion": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "Get conversion analytics",
        "parameters": [
          {
            "name": "period",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "week",
                "month",
                "quarter",
                "year"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Conversion analytics",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/ConversionAnalytics"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/crm/analytics/team-performance": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "Get team performance metrics",
        "parameters": [
          {
            "name": "period",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "week",
                "month",
                "quarter",
                "year"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Team performance metrics",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/TeamPerformance"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/crm/ai/chat": {
      "post": {
        "tags": [
          "AI"
        ],
        "summary": "Send AI chat message",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "message"
                ],
                "properties": {
                  "message": {
                    "type": "string"
                  },
                  "conversation_id": {
                    "type": "string"
                  },
                  "context": {
                    "type": "object"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "AI response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "response": {
                      "type": "string"
                    },
                    "conversation_id": {
                      "type": "string"
                    },
                    "suggested_actions": {
                      "type": "array",
                      "items": {
                        "type": "object"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/crm/ai/chat/{conversation_id}": {
      "get": {
        "tags": [
          "AI"
        ],
        "summary": "Get AI conversation",
        "parameters": [
          {
            "name": "conversation_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Conversation history",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/AIConversation"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/crm/ai/conversations": {
      "get": {
        "tags": [
          "AI"
        ],
        "summary": "List AI conversations",
        "parameters": [
          {
            "$ref": "#/components/parameters/page"
          },
          {
            "$ref": "#/components/parameters/limit"
          }
        ],
        "responses": {
          "200": {
            "description": "List of conversations",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/AIConversation"
                      }
                    },
                    "pagination": {
                      "$ref": "#/components/schemas/Pagination"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/crm/ai/score-batch": {
      "post": {
        "tags": [
          "AI"
        ],
        "summary": "Score multiple leads",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "lead_ids"
                ],
                "properties": {
                  "lead_ids": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Batch scoring results",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "results": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "lead_id": {
                            "type": "string"
                          },
                          "score": {
                            "type": "number"
                          },
                          "confidence": {
                            "type": "number"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/crm/ai/insights": {
      "post": {
        "tags": [
          "AI"
        ],
        "summary": "Generate AI insights",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "type",
                  "entity_id"
                ],
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "lead",
                      "contact",
                      "opportunity",
                      "account"
                    ]
                  },
                  "entity_id": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "AI insights",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "insights": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "type": {
                            "type": "string"
                          },
                          "message": {
                            "type": "string"
                          },
                          "confidence": {
                            "type": "number"
                          },
                          "actions": {
                            "type": "array",
                            "items": {
                              "type": "object"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/admin/forms": {
      "get": {
        "tags": [
          "Forms"
        ],
        "summary": "List forms",
        "parameters": [
          {
            "$ref": "#/components/parameters/page"
          },
          {
            "$ref": "#/components/parameters/limit"
          },
          {
            "name": "is_active",
            "in": "query",
            "schema": {
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of forms",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Form"
                      }
                    },
                    "pagination": {
                      "$ref": "#/components/schemas/Pagination"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Forms"
        ],
        "summary": "Create form",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FormInput"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Form created"
          }
        }
      }
    },
    "/admin/forms/{id}": {
      "get": {
        "tags": [
          "Forms"
        ],
        "summary": "Get form details",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "responses": {
          "200": {
            "description": "Form details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/Form"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Forms"
        ],
        "summary": "Update form",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FormInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Form updated"
          }
        }
      },
      "delete": {
        "tags": [
          "Forms"
        ],
        "summary": "Delete form",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "responses": {
          "200": {
            "description": "Form deleted"
          }
        }
      }
    },
    "/admin/forms/{id}/submissions": {
      "get": {
        "tags": [
          "Forms"
        ],
        "summary": "Get form submissions",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          },
          {
            "$ref": "#/components/parameters/page"
          },
          {
            "$ref": "#/components/parameters/limit"
          }
        ],
        "responses": {
          "200": {
            "description": "Form submissions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/FormSubmission"
                      }
                    },
                    "pagination": {
                      "$ref": "#/components/schemas/Pagination"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/admin/forms/{id}/analytics": {
      "get": {
        "tags": [
          "Forms"
        ],
        "summary": "Get form analytics",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "responses": {
          "200": {
            "description": "Form analytics",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/FormAnalytics"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/admin/forms/{id}/duplicate": {
      "post": {
        "tags": [
          "Forms"
        ],
        "summary": "Duplicate form",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Form duplicated"
          }
        }
      }
    },
    "/admin/knowledge-base/articles": {
      "get": {
        "tags": [
          "Knowledge Base"
        ],
        "summary": "List articles (admin)",
        "parameters": [
          {
            "$ref": "#/components/parameters/page"
          },
          {
            "$ref": "#/components/parameters/limit"
          },
          {
            "name": "is_published",
            "in": "query",
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "category_id",
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of articles",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/KBArticle"
                      }
                    },
                    "pagination": {
                      "$ref": "#/components/schemas/Pagination"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Knowledge Base"
        ],
        "summary": "Create article",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/KBArticleInput"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Article created"
          }
        }
      }
    },
    "/admin/knowledge-base/articles/{id}": {
      "get": {
        "tags": [
          "Knowledge Base"
        ],
        "summary": "Get article details (admin)",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "responses": {
          "200": {
            "description": "Article details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/KBArticle"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Knowledge Base"
        ],
        "summary": "Update article",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/KBArticleInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Article updated"
          }
        }
      },
      "delete": {
        "tags": [
          "Knowledge Base"
        ],
        "summary": "Delete article",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "responses": {
          "200": {
            "description": "Article deleted"
          }
        }
      }
    },
    "/admin/knowledge-base/articles/{id}/publish": {
      "post": {
        "tags": [
          "Knowledge Base"
        ],
        "summary": "Publish article",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "responses": {
          "200": {
            "description": "Article published"
          }
        }
      }
    },
    "/admin/knowledge-base/articles/{id}/unpublish": {
      "post": {
        "tags": [
          "Knowledge Base"
        ],
        "summary": "Unpublish article",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "responses": {
          "200": {
            "description": "Article unpublished"
          }
        }
      }
    },
    "/admin/knowledge-base/categories": {
      "get": {
        "tags": [
          "Knowledge Base"
        ],
        "summary": "List KB categories",
        "responses": {
          "200": {
            "description": "List of categories",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/KBCategory"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Knowledge Base"
        ],
        "summary": "Create KB category",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/KBCategoryInput"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Category created"
          }
        }
      }
    },
    "/admin/knowledge-base/categories/{id}": {
      "put": {
        "tags": [
          "Knowledge Base"
        ],
        "summary": "Update KB category",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/KBCategoryInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Category updated"
          }
        }
      },
      "delete": {
        "tags": [
          "Knowledge Base"
        ],
        "summary": "Delete KB category",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "responses": {
          "200": {
            "description": "Category deleted"
          }
        }
      }
    },
    "/admin/tracking/config": {
      "get": {
        "tags": [
          "Activity Tracking"
        ],
        "summary": "Get tracking configuration",
        "responses": {
          "200": {
            "description": "Tracking configuration",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/TrackingConfig"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Activity Tracking"
        ],
        "summary": "Update tracking configuration",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TrackingConfig"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Configuration updated"
          }
        }
      }
    },
    "/admin/tracking/sessions": {
      "get": {
        "tags": [
          "Activity Tracking"
        ],
        "summary": "List tracking sessions",
        "parameters": [
          {
            "$ref": "#/components/parameters/page"
          },
          {
            "$ref": "#/components/parameters/limit"
          },
          {
            "name": "visitor_id",
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of sessions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/TrackingSession"
                      }
                    },
                    "pagination": {
                      "$ref": "#/components/schemas/Pagination"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/admin/tracking/sessions/{id}": {
      "get": {
        "tags": [
          "Activity Tracking"
        ],
        "summary": "Get session details",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "responses": {
          "200": {
            "description": "Session details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/TrackingSession"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/admin/tracking/page-views": {
      "get": {
        "tags": [
          "Activity Tracking"
        ],
        "summary": "List page views",
        "parameters": [
          {
            "$ref": "#/components/parameters/page"
          },
          {
            "$ref": "#/components/parameters/limit"
          },
          {
            "name": "session_id",
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of page views",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/PageView"
                      }
                    },
                    "pagination": {
                      "$ref": "#/components/schemas/Pagination"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/admin/tracking/visitors": {
      "get": {
        "tags": [
          "Activity Tracking"
        ],
        "summary": "List unique visitors",
        "parameters": [
          {
            "$ref": "#/components/parameters/page"
          },
          {
            "$ref": "#/components/parameters/limit"
          }
        ],
        "responses": {
          "200": {
            "description": "List of visitors",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Visitor"
                      }
                    },
                    "pagination": {
                      "$ref": "#/components/schemas/Pagination"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/admin/tracking/analytics": {
      "get": {
        "tags": [
          "Activity Tracking"
        ],
        "summary": "Get tracking analytics",
        "parameters": [
          {
            "name": "period",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "day",
                "week",
                "month",
                "year"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Tracking analytics",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/TrackingAnalytics"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/admin/health-scoring/rules": {
      "get": {
        "tags": [
          "Customer Health"
        ],
        "summary": "List health scoring rules",
        "responses": {
          "200": {
            "description": "List of rules",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/HealthRule"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Customer Health"
        ],
        "summary": "Create health rule",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/HealthRuleInput"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Rule created"
          }
        }
      }
    },
    "/admin/health-scoring/rules/{id}": {
      "put": {
        "tags": [
          "Customer Health"
        ],
        "summary": "Update health rule",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/HealthRuleInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Rule updated"
          }
        }
      },
      "delete": {
        "tags": [
          "Customer Health"
        ],
        "summary": "Delete health rule",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "responses": {
          "200": {
            "description": "Rule deleted"
          }
        }
      }
    },
    "/admin/health-scoring/calculate": {
      "post": {
        "tags": [
          "Customer Health"
        ],
        "summary": "Calculate health scores",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "contact_ids": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Scores calculated"
          }
        }
      }
    },
    "/admin/health-scoring/scores": {
      "get": {
        "tags": [
          "Customer Health"
        ],
        "summary": "List health scores",
        "parameters": [
          {
            "$ref": "#/components/parameters/page"
          },
          {
            "$ref": "#/components/parameters/limit"
          },
          {
            "name": "risk_level",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "high",
                "medium",
                "low"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of scores",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/HealthScore"
                      }
                    },
                    "pagination": {
                      "$ref": "#/components/schemas/Pagination"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/admin/health-scoring/trends": {
      "get": {
        "tags": [
          "Customer Health"
        ],
        "summary": "Get health trends",
        "parameters": [
          {
            "name": "period",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "week",
                "month",
                "quarter",
                "year"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Health trends",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/HealthTrends"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/admin/emails/templates": {
      "get": {
        "tags": [
          "Email"
        ],
        "summary": "List email templates",
        "responses": {
          "200": {
            "description": "List of templates",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/EmailTemplate"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Email"
        ],
        "summary": "Create email template",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EmailTemplateInput"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Template created"
          }
        }
      }
    },
    "/admin/emails/templates/{id}": {
      "put": {
        "tags": [
          "Email"
        ],
        "summary": "Update email template",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EmailTemplateInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Template updated"
          }
        }
      },
      "delete": {
        "tags": [
          "Email"
        ],
        "summary": "Delete email template",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "responses": {
          "200": {
            "description": "Template deleted"
          }
        }
      }
    },
    "/admin/emails/test": {
      "post": {
        "tags": [
          "Email"
        ],
        "summary": "Send test email",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "template_id",
                  "to_email"
                ],
                "properties": {
                  "template_id": {
                    "type": "string"
                  },
                  "to_email": {
                    "type": "string",
                    "format": "email"
                  },
                  "variables": {
                    "type": "object"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Test email sent"
          }
        }
      }
    },
    "/admin/documents/upload": {
      "post": {
        "tags": [
          "Documents"
        ],
        "summary": "Upload document",
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "required": [
                  "file"
                ],
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary"
                  },
                  "name": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "parent_type": {
                    "type": "string"
                  },
                  "parent_id": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Document uploaded",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/Document"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/admin/documents/{id}": {
      "get": {
        "tags": [
          "Documents"
        ],
        "summary": "Get document details",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "responses": {
          "200": {
            "description": "Document details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/Document"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Documents"
        ],
        "summary": "Delete document",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "responses": {
          "200": {
            "description": "Document deleted"
          }
        }
      }
    },
    "/admin/documents/{id}/download": {
      "get": {
        "tags": [
          "Documents"
        ],
        "summary": "Download document",
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "responses": {
          "200": {
            "description": "Document file",
            "content": {
              "application/octet-stream": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            }
          }
        }
      }
    },
    "/admin/settings/ai": {
      "get": {
        "tags": [
          "AI"
        ],
        "summary": "Get AI settings",
        "responses": {
          "200": {
            "description": "AI settings",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/AISettings"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "AI"
        ],
        "summary": "Update AI settings",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AISettings"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Settings updated"
          }
        }
      }
    },
    "/admin/settings/tracking": {
      "get": {
        "tags": [
          "Activity Tracking"
        ],
        "summary": "Get tracking settings",
        "responses": {
          "200": {
            "description": "Tracking settings",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/TrackingSettings"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Activity Tracking"
        ],
        "summary": "Update tracking settings",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TrackingSettings"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Settings updated"
          }
        }
      }
    },
    "/public/forms/{id}": {
      "get": {
        "tags": [
          "Public"
        ],
        "summary": "Get public form",
        "security": [],
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "responses": {
          "200": {
            "description": "Public form",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/PublicForm"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/public/forms/{id}/submit": {
      "post": {
        "tags": [
          "Public"
        ],
        "summary": "Submit form",
        "security": [],
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "fields": {
                    "type": "object"
                  },
                  "metadata": {
                    "type": "object"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Form submitted"
          }
        }
      }
    },
    "/public/kb/search": {
      "get": {
        "tags": [
          "Public"
        ],
        "summary": "Search knowledge base",
        "security": [],
        "parameters": [
          {
            "name": "q",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Search results",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/PublicKBArticle"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/public/kb/articles": {
      "get": {
        "tags": [
          "Public"
        ],
        "summary": "List public KB articles",
        "security": [],
        "parameters": [
          {
            "$ref": "#/components/parameters/page"
          },
          {
            "$ref": "#/components/parameters/limit"
          },
          {
            "name": "category_id",
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of articles",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/PublicKBArticle"
                      }
                    },
                    "pagination": {
                      "$ref": "#/components/schemas/Pagination"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/public/kb/articles/{slug}": {
      "get": {
        "tags": [
          "Public"
        ],
        "summary": "Get public KB article",
        "security": [],
        "parameters": [
          {
            "name": "slug",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Article details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/PublicKBArticle"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/public/kb/categories": {
      "get": {
        "tags": [
          "Public"
        ],
        "summary": "List public KB categories",
        "security": [],
        "responses": {
          "200": {
            "description": "List of categories",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/PublicKBCategory"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/public/kb/articles/{id}/feedback": {
      "post": {
        "tags": [
          "Public"
        ],
        "summary": "Submit article feedback",
        "security": [],
        "parameters": [
          {
            "$ref": "#/components/parameters/id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "helpful"
                ],
                "properties": {
                  "helpful": {
                    "type": "boolean"
                  },
                  "comment": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Feedback submitted"
          }
        }
      }
    },
    "/public/track/pageview": {
      "post": {
        "tags": [
          "Public"
        ],
        "summary": "Track page view",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "session_id",
                  "url"
                ],
                "properties": {
                  "session_id": {
                    "type": "string"
                  },
                  "url": {
                    "type": "string"
                  },
                  "title": {
                    "type": "string"
                  },
                  "referrer": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Page view tracked"
          }
        }
      }
    },
    "/public/track/event": {
      "post": {
        "tags": [
          "Public"
        ],
        "summary": "Track custom event",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "session_id",
                  "event_name"
                ],
                "properties": {
                  "session_id": {
                    "type": "string"
                  },
                  "event_name": {
                    "type": "string"
                  },
                  "event_data": {
                    "type": "object"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Event tracked"
          }
        }
      }
    },
    "/public/track/session/start": {
      "post": {
        "tags": [
          "Public"
        ],
        "summary": "Start tracking session",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "visitor_id": {
                    "type": "string"
                  },
                  "user_agent": {
                    "type": "string"
                  },
                  "ip_address": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Session started",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "session_id": {
                      "type": "string"
                    },
                    "visitor_id": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/public/track/session/end": {
      "post": {
        "tags": [
          "Public"
        ],
        "summary": "End tracking session",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "session_id"
                ],
                "properties": {
                  "session_id": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Session ended"
          }
        }
      }
    },
    "/public/chat/start": {
      "post": {
        "tags": [
          "Public"
        ],
        "summary": "Start public chat",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "visitor_id": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  },
                  "email": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Chat started",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "session_id": {
                      "type": "string"
                    },
                    "welcome_message": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/public/chat/message": {
      "post": {
        "tags": [
          "Public"
        ],
        "summary": "Send public chat message",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "session_id",
                  "message"
                ],
                "properties": {
                  "session_id": {
                    "type": "string"
                  },
                  "message": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "AI response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "response": {
                      "type": "string"
                    },
                    "suggested_actions": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/public/chat/conversation/{session_id}": {
      "get": {
        "tags": [
          "Public"
        ],
        "summary": "Get public chat conversation",
        "security": [],
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Conversation history",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/PublicConversation"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/public/capture/lead": {
      "post": {
        "tags": [
          "Public"
        ],
        "summary": "Capture public lead",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email1"
                ],
                "properties": {
                  "first_name": {
                    "type": "string"
                  },
                  "last_name": {
                    "type": "string"
                  },
                  "email1": {
                    "type": "string",
                    "format": "email"
                  },
                  "phone_work": {
                    "type": "string"
                  },
                  "account_name": {
                    "type": "string"
                  },
                  "lead_source": {
                    "type": "string"
                  },
                  "metadata": {
                    "type": "object"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Lead captured"
          }
        }
      }
    },
    "/public/demo-request": {
      "post": {
        "tags": [
          "Public"
        ],
        "summary": "Request product demo",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "first_name",
                  "last_name",
                  "email1",
                  "account_name"
                ],
                "properties": {
                  "first_name": {
                    "type": "string"
                  },
                  "last_name": {
                    "type": "string"
                  },
                  "email1": {
                    "type": "string",
                    "format": "email"
                  },
                  "phone_work": {
                    "type": "string"
                  },
                  "account_name": {
                    "type": "string"
                  },
                  "preferred_time": {
                    "type": "string"
                  },
                  "message": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Demo request submitted"
          }
        }
      }
    },
    "/public/newsletter/subscribe": {
      "post": {
        "tags": [
          "Public"
        ],
        "summary": "Subscribe to newsletter",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "first_name": {
                    "type": "string"
                  },
                  "last_name": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Subscribed successfully"
          }
        }
      }
    },
    "/public/tracking-script.js": {
      "get": {
        "tags": [
          "Public"
        ],
        "summary": "Get tracking JavaScript",
        "security": [],
        "responses": {
          "200": {
            "description": "JavaScript tracking code",
            "content": {
              "application/javascript": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/public/chat-widget.js": {
      "get": {
        "tags": [
          "Public"
        ],
        "summary": "Get chat widget JavaScript",
        "security": [],
        "responses": {
          "200": {
            "description": "JavaScript chat widget",
            "content": {
              "application/javascript": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/public/forms-embed.js": {
      "get": {
        "tags": [
          "Public"
        ],
        "summary": "Get forms embed JavaScript",
        "security": [],
        "responses": {
          "200": {
            "description": "JavaScript forms embed",
            "content": {
              "application/javascript": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/schema": {
      "get": {
        "tags": [
          "Schema"
        ],
        "summary": "Get full database schema",
        "security": [],
        "responses": {
          "200": {
            "description": "Database schema",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "object"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/schema/validation": {
      "get": {
        "tags": [
          "Schema"
        ],
        "summary": "Get validation rules",
        "security": [],
        "responses": {
          "200": {
            "description": "Validation rules",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "object"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/schema/enums": {
      "get": {
        "tags": [
          "Schema"
        ],
        "summary": "Get enum values",
        "security": [],
        "responses": {
          "200": {
            "description": "Enum values",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/schema/openapi": {
      "get": {
        "tags": [
          "Schema"
        ],
        "summary": "Get OpenAPI specification",
        "security": [],
        "responses": {
          "200": {
            "description": "OpenAPI spec",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/schema/typescript": {
      "get": {
        "tags": [
          "Schema"
        ],
        "summary": "Get TypeScript types",
        "security": [],
        "responses": {
          "200": {
            "description": "TypeScript definitions",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/schema/field-mapping": {
      "get": {
        "tags": [
          "Schema"
        ],
        "summary": "Get field mapping",
        "security": [],
        "responses": {
          "200": {
            "description": "Field mappings",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "object"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/health": {
      "get": {
        "tags": [
          "System"
        ],
        "summary": "Health check",
        "security": [],
        "responses": {
          "200": {
            "description": "System health",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "healthy",
                        "degraded",
                        "unhealthy"
                      ]
                    },
                    "database": {
                      "type": "boolean"
                    },
                    "redis": {
                      "type": "boolean"
                    },
                    "openai": {
                      "type": "boolean"
                    },
                    "version": {
                      "type": "string"
                    },
                    "uptime": {
                      "type": "integer"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    },
    "parameters": {
      "id": {
        "name": "id",
        "in": "path",
        "required": true,
        "schema": {
          "type": "string"
        }
      },
      "page": {
        "name": "page",
        "in": "query",
        "schema": {
          "type": "integer",
          "minimum": 1,
          "default": 1
        }
      },
      "limit": {
        "name": "limit",
        "in": "query",
        "schema": {
          "type": "integer",
          "minimum": 1,
          "maximum": 100,
          "default": 20
        }
      }
    },
    "responses": {
      "BadRequest": {
        "description": "Bad request",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string"
                },
                "errors": {
                  "type": "object"
                }
              }
            }
          }
        }
      },
      "Unauthorized": {
        "description": "Unauthorized",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "Unauthorized"
                }
              }
            }
          }
        }
      },
      "NotFound": {
        "description": "Resource not found",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "Resource not found"
                }
              }
            }
          }
        }
      }
    },
    "schemas": {
      "User": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "user_name": {
            "type": "string"
          },
          "first_name": {
            "type": "string"
          },
          "last_name": {
            "type": "string"
          },
          "email1": {
            "type": "string",
            "format": "email"
          },
          "phone_work": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": [
              "active",
              "inactive"
            ]
          },
          "last_login": {
            "type": "string",
            "format": "date-time"
          },
          "date_entered": {
            "type": "string",
            "format": "date-time"
          },
          "date_modified": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Lead": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "first_name": {
            "type": "string"
          },
          "last_name": {
            "type": "string"
          },
          "email1": {
            "type": "string"
          },
          "email2": {
            "type": "string"
          },
          "phone_work": {
            "type": "string"
          },
          "phone_mobile": {
            "type": "string"
          },
          "phone_home": {
            "type": "string"
          },
          "phone_other": {
            "type": "string"
          },
          "phone_fax": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "department": {
            "type": "string"
          },
          "account_name": {
            "type": "string"
          },
          "website": {
            "type": "string"
          },
          "lead_source": {
            "type": "string"
          },
          "lead_source_description": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": [
              "new",
              "contacted",
              "qualified",
              "unqualified",
              "converted"
            ]
          },
          "status_description": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "assigned_user_id": {
            "type": "string"
          },
          "date_entered": {
            "type": "string",
            "format": "date-time"
          },
          "date_modified": {
            "type": "string",
            "format": "date-time"
          },
          "ai_score": {
            "type": "number",
            "format": "float"
          }
        }
      },
      "LeadInput": {
        "type": "object",
        "required": [
          "last_name"
        ],
        "properties": {
          "first_name": {
            "type": "string"
          },
          "last_name": {
            "type": "string"
          },
          "email1": {
            "type": "string"
          },
          "email2": {
            "type": "string"
          },
          "phone_work": {
            "type": "string"
          },
          "phone_mobile": {
            "type": "string"
          },
          "phone_home": {
            "type": "string"
          },
          "phone_other": {
            "type": "string"
          },
          "phone_fax": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "department": {
            "type": "string"
          },
          "account_name": {
            "type": "string"
          },
          "website": {
            "type": "string"
          },
          "lead_source": {
            "type": "string"
          },
          "lead_source_description": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": [
              "new",
              "contacted",
              "qualified",
              "unqualified",
              "converted"
            ]
          },
          "status_description": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "assigned_user_id": {
            "type": "string"
          }
        }
      },
      "LeadScore": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "lead_id": {
            "type": "string"
          },
          "score": {
            "type": "number",
            "format": "float"
          },
          "confidence": {
            "type": "number",
            "format": "float"
          },
          "factors": {
            "type": "object"
          },
          "scored_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Contact": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "first_name": {
            "type": "string"
          },
          "last_name": {
            "type": "string"
          },
          "email1": {
            "type": "string"
          },
          "email2": {
            "type": "string"
          },
          "phone_work": {
            "type": "string"
          },
          "phone_mobile": {
            "type": "string"
          },
          "phone_home": {
            "type": "string"
          },
          "phone_other": {
            "type": "string"
          },
          "phone_fax": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "department": {
            "type": "string"
          },
          "account_id": {
            "type": "string"
          },
          "lead_source": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "assigned_user_id": {
            "type": "string"
          },
          "date_entered": {
            "type": "string",
            "format": "date-time"
          },
          "date_modified": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "ContactInput": {
        "type": "object",
        "required": [
          "last_name"
        ],
        "properties": {
          "first_name": {
            "type": "string"
          },
          "last_name": {
            "type": "string"
          },
          "email1": {
            "type": "string"
          },
          "email2": {
            "type": "string"
          },
          "phone_work": {
            "type": "string"
          },
          "phone_mobile": {
            "type": "string"
          },
          "phone_home": {
            "type": "string"
          },
          "phone_other": {
            "type": "string"
          },
          "phone_fax": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "department": {
            "type": "string"
          },
          "account_id": {
            "type": "string"
          },
          "lead_source": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "assigned_user_id": {
            "type": "string"
          }
        }
      },
      "Opportunity": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "opportunity_type": {
            "type": "string"
          },
          "account_id": {
            "type": "string"
          },
          "campaign_id": {
            "type": "string"
          },
          "lead_source": {
            "type": "string"
          },
          "amount": {
            "type": "number",
            "format": "float"
          },
          "amount_usdollar": {
            "type": "number",
            "format": "float"
          },
          "currency_id": {
            "type": "string"
          },
          "date_closed": {
            "type": "string",
            "format": "date"
          },
          "next_step": {
            "type": "string"
          },
          "sales_stage": {
            "type": "string"
          },
          "probability": {
            "type": "integer"
          },
          "description": {
            "type": "string"
          },
          "assigned_user_id": {
            "type": "string"
          },
          "date_entered": {
            "type": "string",
            "format": "date-time"
          },
          "date_modified": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "OpportunityInput": {
        "type": "object",
        "required": [
          "name",
          "sales_stage"
        ],
        "properties": {
          "name": {
            "type": "string"
          },
          "opportunity_type": {
            "type": "string"
          },
          "account_id": {
            "type": "string"
          },
          "campaign_id": {
            "type": "string"
          },
          "lead_source": {
            "type": "string"
          },
          "amount": {
            "type": "number",
            "format": "float"
          },
          "currency_id": {
            "type": "string"
          },
          "date_closed": {
            "type": "string",
            "format": "date"
          },
          "next_step": {
            "type": "string"
          },
          "sales_stage": {
            "type": "string"
          },
          "probability": {
            "type": "integer"
          },
          "description": {
            "type": "string"
          },
          "assigned_user_id": {
            "type": "string"
          }
        }
      },
      "SupportCase": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "case_number": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "type": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": [
              "new",
              "assigned",
              "closed",
              "pending_input",
              "rejected"
            ]
          },
          "priority": {
            "type": "string",
            "enum": [
              "high",
              "medium",
              "low"
            ]
          },
          "resolution": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "account_id": {
            "type": "string"
          },
          "contact_id": {
            "type": "string"
          },
          "assigned_user_id": {
            "type": "string"
          },
          "date_entered": {
            "type": "string",
            "format": "date-time"
          },
          "date_modified": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "CaseInput": {
        "type": "object",
        "required": [
          "name"
        ],
        "properties": {
          "name": {
            "type": "string"
          },
          "type": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": [
              "new",
              "assigned",
              "closed",
              "pending_input",
              "rejected"
            ]
          },
          "priority": {
            "type": "string",
            "enum": [
              "high",
              "medium",
              "low"
            ]
          },
          "resolution": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "account_id": {
            "type": "string"
          },
          "contact_id": {
            "type": "string"
          },
          "assigned_user_id": {
            "type": "string"
          }
        }
      },
      "Activity": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "type": {
            "type": "string",
            "enum": [
              "task",
              "call",
              "meeting"
            ]
          },
          "status": {
            "type": "string"
          },
          "priority": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "date_start": {
            "type": "string",
            "format": "date-time"
          },
          "date_due": {
            "type": "string",
            "format": "date-time"
          },
          "duration": {
            "type": "integer"
          },
          "parent_type": {
            "type": "string"
          },
          "parent_id": {
            "type": "string"
          },
          "assigned_user_id": {
            "type": "string"
          },
          "date_entered": {
            "type": "string",
            "format": "date-time"
          },
          "date_modified": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "ActivityInput": {
        "type": "object",
        "required": [
          "name"
        ],
        "properties": {
          "name": {
            "type": "string"
          },
          "status": {
            "type": "string"
          },
          "priority": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "date_start": {
            "type": "string",
            "format": "date-time"
          },
          "date_due": {
            "type": "string",
            "format": "date-time"
          },
          "duration": {
            "type": "integer"
          },
          "parent_type": {
            "type": "string"
          },
          "parent_id": {
            "type": "string"
          },
          "assigned_user_id": {
            "type": "string"
          }
        }
      },
      "TaskInput": {
        "allOf": [
          {
            "$ref": "#/components/schemas/ActivityInput"
          },
          {
            "type": "object"
          }
        ]
      },
      "CallInput": {
        "allOf": [
          {
            "$ref": "#/components/schemas/ActivityInput"
          },
          {
            "type": "object",
            "properties": {
              "direction": {
                "type": "string",
                "enum": [
                  "inbound",
                  "outbound"
                ]
              }
            }
          }
        ]
      },
      "MeetingInput": {
        "allOf": [
          {
            "$ref": "#/components/schemas/ActivityInput"
          },
          {
            "type": "object",
            "properties": {
              "location": {
                "type": "string"
              }
            }
          }
        ]
      },
      "DashboardMetrics": {
        "type": "object",
        "properties": {
          "leads": {
            "type": "object",
            "properties": {
              "total": {
                "type": "integer"
              },
              "new": {
                "type": "integer"
              },
              "converted": {
                "type": "integer"
              },
              "conversion_rate": {
                "type": "number"
              }
            }
          },
          "opportunities": {
            "type": "object",
            "properties": {
              "total": {
                "type": "integer"
              },
              "open": {
                "type": "integer"
              },
              "won": {
                "type": "integer"
              },
              "lost": {
                "type": "integer"
              },
              "total_value": {
                "type": "number"
              }
            }
          },
          "cases": {
            "type": "object",
            "properties": {
              "total": {
                "type": "integer"
              },
              "open": {
                "type": "integer"
              },
              "closed": {
                "type": "integer"
              },
              "avg_resolution_time": {
                "type": "number"
              }
            }
          },
          "activities": {
            "type": "object",
            "properties": {
              "total": {
                "type": "integer"
              },
              "overdue": {
                "type": "integer"
              },
              "today": {
                "type": "integer"
              },
              "upcoming": {
                "type": "integer"
              }
            }
          }
        }
      },
      "PipelineData": {
        "type": "object",
        "additionalProperties": {
          "type": "object",
          "properties": {
            "count": {
              "type": "integer"
            },
            "value": {
              "type": "number"
            },
            "opportunities": {
              "type": "array",
              "items": {
                "$ref": "#/components/schemas/Opportunity"
              }
            }
          }
        }
      },
      "ActivityMetrics": {
        "type": "object",
        "properties": {
          "by_type": {
            "type": "object",
            "additionalProperties": {
              "type": "integer"
            }
          },
          "by_user": {
            "type": "object",
            "additionalProperties": {
              "type": "integer"
            }
          },
          "completion_rate": {
            "type": "number"
          },
          "overdue_rate": {
            "type": "number"
          }
        }
      },
      "CaseMetrics": {
        "type": "object",
        "properties": {
          "by_status": {
            "type": "object",
            "additionalProperties": {
              "type": "integer"
            }
          },
          "by_priority": {
            "type": "object",
            "additionalProperties": {
              "type": "integer"
            }
          },
          "resolution_time": {
            "type": "object",
            "properties": {
              "average": {
                "type": "number"
              },
              "median": {
                "type": "number"
              }
            }
          },
          "sla_compliance": {
            "type": "number"
          }
        }
      },
      "SalesAnalytics": {
        "type": "object",
        "properties": {
          "revenue": {
            "type": "object",
            "properties": {
              "total": {
                "type": "number"
              },
              "by_month": {
                "type": "object"
              },
              "growth_rate": {
                "type": "number"
              }
            }
          },
          "deals": {
            "type": "object",
            "properties": {
              "won": {
                "type": "integer"
              },
              "lost": {
                "type": "integer"
              },
              "in_progress": {
                "type": "integer"
              },
              "win_rate": {
                "type": "number"
              }
            }
          },
          "pipeline": {
            "type": "object",
            "properties": {
              "value": {
                "type": "number"
              },
              "velocity": {
                "type": "number"
              },
              "stages": {
                "type": "object"
              }
            }
          }
        }
      },
      "LeadAnalytics": {
        "type": "object",
        "properties": {
          "total": {
            "type": "integer"
          },
          "by_source": {
            "type": "object",
            "additionalProperties": {
              "type": "integer"
            }
          },
          "by_status": {
            "type": "object",
            "additionalProperties": {
              "type": "integer"
            }
          },
          "conversion": {
            "type": "object",
            "properties": {
              "rate": {
                "type": "number"
              },
              "time": {
                "type": "number"
              }
            }
          },
          "quality": {
            "type": "object",
            "properties": {
              "average_score": {
                "type": "number"
              },
              "qualified_percentage": {
                "type": "number"
              }
            }
          }
        }
      },
      "ActivityAnalytics": {
        "type": "object",
        "properties": {
          "total": {
            "type": "integer"
          },
          "by_type": {
            "type": "object",
            "additionalProperties": {
              "type": "integer"
            }
          },
          "by_user": {
            "type": "object",
            "additionalProperties": {
              "type": "integer"
            }
          },
          "completion": {
            "type": "object",
            "properties": {
              "rate": {
                "type": "number"
              },
              "on_time_rate": {
                "type": "number"
              }
            }
          },
          "trends": {
            "type": "object"
          }
        }
      },
      "ConversionAnalytics": {
        "type": "object",
        "properties": {
          "lead_to_opportunity": {
            "type": "object",
            "properties": {
              "rate": {
                "type": "number"
              },
              "average_time": {
                "type": "number"
              }
            }
          },
          "opportunity_to_won": {
            "type": "object",
            "properties": {
              "rate": {
                "type": "number"
              },
              "average_time": {
                "type": "number"
              }
            }
          },
          "by_source": {
            "type": "object",
            "additionalProperties": {
              "type": "object",
              "properties": {
                "rate": {
                  "type": "number"
                },
                "count": {
                  "type": "integer"
                }
              }
            }
          }
        }
      },
      "TeamPerformance": {
        "type": "object",
        "properties": {
          "users": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "user_id": {
                  "type": "string"
                },
                "name": {
                  "type": "string"
                },
                "metrics": {
                  "type": "object",
                  "properties": {
                    "leads_created": {
                      "type": "integer"
                    },
                    "opportunities_won": {
                      "type": "integer"
                    },
                    "revenue_generated": {
                      "type": "number"
                    },
                    "activities_completed": {
                      "type": "integer"
                    },
                    "average_deal_size": {
                      "type": "number"
                    },
                    "win_rate": {
                      "type": "number"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "AIConversation": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "user_id": {
            "type": "string"
          },
          "messages": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "string"
                },
                "role": {
                  "type": "string",
                  "enum": [
                    "user",
                    "assistant"
                  ]
                },
                "content": {
                  "type": "string"
                },
                "timestamp": {
                  "type": "string",
                  "format": "date-time"
                }
              }
            }
          },
          "metadata": {
            "type": "object"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Form": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "type": {
            "type": "string"
          },
          "fields": {
            "type": "array",
            "items": {
              "type": "object"
            }
          },
          "settings": {
            "type": "object"
          },
          "is_active": {
            "type": "boolean"
          },
          "submission_count": {
            "type": "integer"
          },
          "created_by": {
            "type": "string"
          },
          "date_entered": {
            "type": "string",
            "format": "date-time"
          },
          "date_modified": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "FormInput": {
        "type": "object",
        "required": [
          "name",
          "type",
          "fields"
        ],
        "properties": {
          "name": {
            "type": "string"
          },
          "type": {
            "type": "string"
          },
          "fields": {
            "type": "array",
            "items": {
              "type": "object"
            }
          },
          "settings": {
            "type": "object"
          },
          "is_active": {
            "type": "boolean"
          }
        }
      },
      "FormSubmission": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "form_id": {
            "type": "string"
          },
          "data": {
            "type": "object"
          },
          "metadata": {
            "type": "object"
          },
          "lead_id": {
            "type": "string"
          },
          "submitted_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "FormAnalytics": {
        "type": "object",
        "properties": {
          "views": {
            "type": "integer"
          },
          "starts": {
            "type": "integer"
          },
          "completions": {
            "type": "integer"
          },
          "conversion_rate": {
            "type": "number"
          },
          "average_time": {
            "type": "number"
          },
          "field_analytics": {
            "type": "object"
          }
        }
      },
      "PublicForm": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "fields": {
            "type": "array",
            "items": {
              "type": "object"
            }
          },
          "settings": {
            "type": "object"
          }
        }
      },
      "KBArticle": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "slug": {
            "type": "string"
          },
          "content": {
            "type": "string"
          },
          "summary": {
            "type": "string"
          },
          "category_id": {
            "type": "string"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "is_published": {
            "type": "boolean"
          },
          "view_count": {
            "type": "integer"
          },
          "helpful_count": {
            "type": "integer"
          },
          "author_id": {
            "type": "string"
          },
          "date_entered": {
            "type": "string",
            "format": "date-time"
          },
          "date_modified": {
            "type": "string",
            "format": "date-time"
          },
          "date_published": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "KBArticleInput": {
        "type": "object",
        "required": [
          "title",
          "content"
        ],
        "properties": {
          "title": {
            "type": "string"
          },
          "content": {
            "type": "string"
          },
          "summary": {
            "type": "string"
          },
          "category_id": {
            "type": "string"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "is_published": {
            "type": "boolean"
          }
        }
      },
      "KBCategory": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "slug": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "parent_id": {
            "type": "string"
          },
          "article_count": {
            "type": "integer"
          },
          "order_index": {
            "type": "integer"
          }
        }
      },
      "KBCategoryInput": {
        "type": "object",
        "required": [
          "name"
        ],
        "properties": {
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "parent_id": {
            "type": "string"
          },
          "order_index": {
            "type": "integer"
          }
        }
      },
      "PublicKBArticle": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "slug": {
            "type": "string"
          },
          "content": {
            "type": "string"
          },
          "summary": {
            "type": "string"
          },
          "category": {
            "$ref": "#/components/schemas/PublicKBCategory"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "view_count": {
            "type": "integer"
          },
          "helpful_count": {
            "type": "integer"
          },
          "date_published": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "PublicKBCategory": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "slug": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "article_count": {
            "type": "integer"
          }
        }
      },
      "TrackingConfig": {
        "type": "object",
        "properties": {
          "enabled": {
            "type": "boolean"
          },
          "domains_whitelist": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "domains_blacklist": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "track_authenticated_users": {
            "type": "boolean"
          },
          "anonymize_ip": {
            "type": "boolean"
          },
          "session_timeout": {
            "type": "integer"
          },
          "custom_events": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "TrackingSession": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "visitor_id": {
            "type": "string"
          },
          "user_id": {
            "type": "string"
          },
          "started_at": {
            "type": "string",
            "format": "date-time"
          },
          "ended_at": {
            "type": "string",
            "format": "date-time"
          },
          "duration": {
            "type": "integer"
          },
          "page_views": {
            "type": "integer"
          },
          "events": {
            "type": "integer"
          },
          "metadata": {
            "type": "object"
          }
        }
      },
      "PageView": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "session_id": {
            "type": "string"
          },
          "url": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "referrer": {
            "type": "string"
          },
          "duration": {
            "type": "integer"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Visitor": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "first_seen": {
            "type": "string",
            "format": "date-time"
          },
          "last_seen": {
            "type": "string",
            "format": "date-time"
          },
          "total_sessions": {
            "type": "integer"
          },
          "total_page_views": {
            "type": "integer"
          },
          "user_id": {
            "type": "string"
          },
          "metadata": {
            "type": "object"
          }
        }
      },
      "TrackingAnalytics": {
        "type": "object",
        "properties": {
          "unique_visitors": {
            "type": "integer"
          },
          "total_sessions": {
            "type": "integer"
          },
          "total_page_views": {
            "type": "integer"
          },
          "average_session_duration": {
            "type": "number"
          },
          "bounce_rate": {
            "type": "number"
          },
          "top_pages": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "url": {
                  "type": "string"
                },
                "views": {
                  "type": "integer"
                }
              }
            }
          },
          "visitor_trends": {
            "type": "object"
          }
        }
      },
      "TrackingSettings": {
        "type": "object",
        "properties": {
          "script_version": {
            "type": "string"
          },
          "custom_dimensions": {
            "type": "array",
            "items": {
              "type": "object"
            }
          },
          "event_mappings": {
            "type": "object"
          }
        }
      },
      "HealthScore": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "contact_id": {
            "type": "string"
          },
          "account_id": {
            "type": "string"
          },
          "score": {
            "type": "number",
            "format": "float"
          },
          "health_status": {
            "type": "string",
            "enum": [
              "excellent",
              "good",
              "fair",
              "poor",
              "at_risk"
            ]
          },
          "factors": {
            "type": "object"
          },
          "trend": {
            "type": "string",
            "enum": [
              "improving",
              "stable",
              "declining"
            ]
          },
          "risk_level": {
            "type": "string",
            "enum": [
              "high",
              "medium",
              "low"
            ]
          },
          "calculated_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "HealthRule": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "factor": {
            "type": "string"
          },
          "weight": {
            "type": "number"
          },
          "conditions": {
            "type": "object"
          },
          "is_active": {
            "type": "boolean"
          }
        }
      },
      "HealthRuleInput": {
        "type": "object",
        "required": [
          "name",
          "factor",
          "weight"
        ],
        "properties": {
          "name": {
            "type": "string"
          },
          "factor": {
            "type": "string"
          },
          "weight": {
            "type": "number"
          },
          "conditions": {
            "type": "object"
          },
          "is_active": {
            "type": "boolean"
          }
        }
      },
      "HealthTrends": {
        "type": "object",
        "properties": {
          "overall": {
            "type": "object",
            "properties": {
              "average_score": {
                "type": "number"
              },
              "improving": {
                "type": "integer"
              },
              "stable": {
                "type": "integer"
              },
              "declining": {
                "type": "integer"
              }
            }
          },
          "by_segment": {
            "type": "object"
          },
          "risk_distribution": {
            "type": "object"
          },
          "churn_risk": {
            "type": "array",
            "items": {
              "type": "object"
            }
          }
        }
      },
      "EmailTemplate": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "subject": {
            "type": "string"
          },
          "body_html": {
            "type": "string"
          },
          "body_text": {
            "type": "string"
          },
          "variables": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "category": {
            "type": "string"
          },
          "is_active": {
            "type": "boolean"
          },
          "date_entered": {
            "type": "string",
            "format": "date-time"
          },
          "date_modified": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "EmailTemplateInput": {
        "type": "object",
        "required": [
          "name",
          "subject",
          "body_html"
        ],
        "properties": {
          "name": {
            "type": "string"
          },
          "subject": {
            "type": "string"
          },
          "body_html": {
            "type": "string"
          },
          "body_text": {
            "type": "string"
          },
          "variables": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "category": {
            "type": "string"
          },
          "is_active": {
            "type": "boolean"
          }
        }
      },
      "Document": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "file_name": {
            "type": "string"
          },
          "file_size": {
            "type": "integer"
          },
          "file_type": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "parent_type": {
            "type": "string"
          },
          "parent_id": {
            "type": "string"
          },
          "revision": {
            "type": "integer"
          },
          "uploaded_by": {
            "type": "string"
          },
          "date_entered": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "AISettings": {
        "type": "object",
        "properties": {
          "openai_api_key": {
            "type": "string"
          },
          "model": {
            "type": "string"
          },
          "max_tokens": {
            "type": "integer"
          },
          "temperature": {
            "type": "number"
          },
          "lead_scoring_enabled": {
            "type": "boolean"
          },
          "chat_enabled": {
            "type": "boolean"
          },
          "insights_enabled": {
            "type": "boolean"
          }
        }
      },
      "TimelineEvent": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time"
          },
          "title": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "data": {
            "type": "object"
          }
        }
      },
      "PublicConversation": {
        "type": "object",
        "properties": {
          "session_id": {
            "type": "string"
          },
          "messages": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "role": {
                  "type": "string",
                  "enum": [
                    "user",
                    "assistant"
                  ]
                },
                "content": {
                  "type": "string"
                },
                "timestamp": {
                  "type": "string",
                  "format": "date-time"
                }
              }
            }
          }
        }
      },
      "Pagination": {
        "type": "object",
        "properties": {
          "page": {
            "type": "integer"
          },
          "limit": {
            "type": "integer"
          },
          "total": {
            "type": "integer"
          },
          "total_pages": {
            "type": "integer"
          }
        }
      }
    }
  }
}
